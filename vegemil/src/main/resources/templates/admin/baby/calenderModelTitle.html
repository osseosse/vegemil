<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
	layout:decorator="admin/layout/dataLayout">
	
	<th:block layout:fragment="title">
		<title>달력모델 년/월 타이틀 등록</title>
	</th:block>

	<th:block layout:fragment="add-css">
		<!-- BEGIN: Page CSS-->
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/core/menu/menu-types/vertical-menu.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/pages/app-ecommerce.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/plugins/forms/pickers/form-pickadate.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/plugins/forms/form-wizard.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/plugins/extensions/ext-component-toastr.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/plugins/forms/form-number-input.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/css/plugins/forms/form-quill-editor.css}">
		
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/vendors/css/editors/quill/katex.min.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/vendors/css/editors/quill/monokai-sublime.min.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/vendors/css/editors/quill/quill.snow.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/app-assets/vendors/css/editors/quill/quill.bubble.css}">
		<link rel="stylesheet" th:href="@{https://fonts.gstatic.com}">
		<link rel="stylesheet" type="text/css" th:href="@{https://fonts.googleapis.com/css2?family=Inconsolata&amp;family=Roboto+Slab&amp;family=Slabo+27px&amp;family=Sofia&amp;family=Ubuntu+Mono&amp;display=swap}">
	    <!-- END: Page CSS-->
	   
	
	</th:block>
    
	<th:block layout:fragment="add-script">
		<!-- BEGIN: Page JS-->
	    <script type="text/javascript" th:src="@{/scripts/jquery.serializeObject.min.js}"></script>
	    <script type="text/javascript" th:src="@{/app-assets/vendors/js/editors/quill/katex.min.js}"></script>
	    <script type="text/javascript" th:src="@{/app-assets/vendors/js/editors/quill/highlight.min.js}"></script>
	    <script type="text/javascript" th:src="@{/app-assets/vendors/js/editors/quill/quill.min.js}"></script>
	    <script th:inline="javascript">
	       /*<![CDATA[*/	
	    	   
	    	  
	       
	       	function btnSave(){
	    	   const form = document.form;	    	
	    	   const formData = new FormData(form);
	    	   
	    	   const tRownum = document.getElementById('tRownum').value;
	    	   const tYear = document.getElementById('tYear').value;
	    	   const tMonth1 = document.getElementById('tMonth1').value;
	    	   const tMonth2 = document.getElementById('tMonth2').value;
	    	   const tMonth3 = document.getElementById('tMonth3').value;
	    	   const tBabyname = $("#tRownum option:selected").text();;
	    	   let tMonth1String ="";
	    	   let tMonth2String ="";
	    	   let tMonth3String ="";
	    	   
				console.log("tBabyname:" , tBabyname);
		    
	    	   
	    	   switch (tMonth1){
	    	    case "1": 
	    	      tMonth1String = "January";
	    	      break; 
	    	    case "2":
	    	      tMonth1String = "February";
	    	      break;
	    	    case "3":
	    	      tMonth1String = "march"; 
	    	      break;
	    	    case "4":
	    	      tMonth1String = "April"; 
	    	      break; 
	    	    case "5":
	    	      tMonth1String = "May"; 
	    	      break; 
	    	    case "6":
	    	      tMonth1String = "June"; 
	    	      break; 
	    	    case "7":
	    	      tMonth1String = "July"; 
	    	      break; 
	    	    case "8":
	    	      tMonth1String = "August"; 
	    	      break; 
	    	    case "9":
	    	      tMonth1String = "September"; 
	    	      break; 
	    	    case "10":
	    	      tMonth1String = "October"; 
	    	      break; 
	    	    case "11":
	    	      tMonth1String = "November"; 
	    	      break; 
	    	    case "12":
	    	      tMonth1String = "December"; 
	    	      break; 
	    	  }
	    	   switch (tMonth2){
	    	    case "1": 
	    	      tMonth2String = "January";
	    	      break; 
	    	    case "2":
	    	      tMonth2String = "February";
	    	      break;
	    	    case "3":
	    	      tMonth2String = "march"; 
	    	      break;
	    	    case "4":
	    	      tMonth2String = "April"; 
	    	      break; 
	    	    case "5":
	    	      tMonth2String = "May"; 
	    	      break; 
	    	    case "6":
	    	      tMonth2String = "June"; 
	    	      break; 
	    	    case "7":
	    	      tMonth2String = "July"; 
	    	      break; 
	    	    case "8":
	    	      tMonth2String = "August"; 
	    	      break; 
	    	    case "9":
	    	      tMonth2String = "September"; 
	    	      break; 
	    	    case "10":
	    	      tMonth2String = "October"; 
	    	      break; 
	    	    case "11":
	    	      tMonth2String = "November"; 
	    	      break; 
	    	    case "12":
	    	      tMonth2String = "December"; 
	    	      break; 
	    	  }
	    	   
	    	   switch (tMonth3){
	    	    case "1": 
	    	       tMonth3String = "January";
	    	      break; 
	    	    case "2":
	    	       tMonth3String = "February";
	    	      break;
	    	    case "3":
	    	       tMonth3String = "march"; 
	    	      break;
	    	    case "4":
	    	       tMonth3String = "April"; 
	    	      break; 
	    	    case "5":
	    	       tMonth3String = "May"; 
	    	      break; 
	    	    case "6":
	    	       tMonth3String = "June"; 
	    	      break; 
	    	    case "7":
	    	       tMonth3String= "July"; 
	    	      break; 
	    	    case "8":
	    	       tMonth3String = "August"; 
	    	      break; 
	    	    case "9":
	    	       tMonth3String = "September"; 
	    	      break; 
	    	    case "10":
	    	       tMonth3String = "October"; 
	    	      break; 
	    	    case "11":
	    	       tMonth3String = "November"; 
	    	      break; 
	    	    case "12":
	    	       tMonth3String = "December"; 
	    	      break; 
	    	  }
	    	   	    	   
	    	   if(tRownum == "" || tRownum == "기준 아기모델 선택") {
	    		   alert('기준 아기모델을 선택해주세요');
	    		   return false;
	    	   }
	    	   if(tYear == "" || tYear == "년도") {
	    		   alert('년도를 선택해주세요');
	    		   return false;
	    	   }	    	   
	    	   if(tMonth1 == "" || tMonth1 == "월") {
	    		   alert('달을 선택해 주세요.');
	    		   return false;
	    	   }	    	   
	    	 
	    	   console.log('titleForm', $('#titleForm').serialize());
               $.ajax({
				   type: 'POST',
            	   url: '/admin/manage/baby/calenderModelTitle',				   
    			   dataType : "text",
				   data: {
						   	"tRownum" : tRownum,
		    				"tYear" : tYear,
		    				"tMonth1" : tMonth1, 
		    				"tMonth1String" : tMonth1String, 
		    				"tMonth2" : tMonth2,	   
		    				"tMonth2String" : tMonth2String, 
		    				"tMonth3" : tMonth3,	   
		    				"tMonth3String" : tMonth3String, 
		    				"tBabyname" : tBabyname, 
				   		 },				   		 
			   		success:function(a){
			   			alert('저장되었습니다.');
						window.location.reload();
			      	},
			       	error:function(e){
			    		alert('저장에 실패하였습니다.\n잠시 후 다시 시도해주세요.');				       
			    	}
               })				
		   } 
	       
	       	function btnDel(tIdx) {	
				
				if(confirm('삭제하시겠습니까?')){

					$.ajax({
						url : '/admin/manage/baby/deleteCalenderModelTitle/'+tIdx,
						type : "DELETE",					
						dataType : "text",
						success : function(data) {
							console.log('data============',data);
							if(data){
								alert("삭제되었습니다.");
								window.location.reload();
							}
							else{
								alert("실패했습니다.");
							}
							
						},
						error : function(){
						}
					});
				}
		      // Prevent actual form submission
			}
	       
	       	
	       
        /*]]>*/
	    </script>
	    <!-- END: Page JS-->
    </th:block>
    
	<th:block layout:fragment="content">
    <!-- BEGIN: Content-->
    <div class="app-content content ">
        <div class="content-overlay"></div>
        <div class="header-navbar-shadow"></div>
        <div class="content-wrapper container-xxl p-0">
            <div class="content-header row">
                <div class="content-header-left col-md-9 col-12 mb-2">
                    <div class="row breadcrumbs-top">
                        <div class="col-12">
                            <h2 class="content-header-title float-start mb-0">달력모델 년/월 타이틀 등록</h2>
                            <div class="breadcrumb-wrapper">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="index.html">Home</a>
                                    </li>
                                    <li class="breadcrumb-item"><a href="#">영유아식</a>
                                    </li>
                                    <li class="breadcrumb-item active">달력모델 년/월 타이틀 등록
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>              
            </div>
            
            <div class="content-body">
            	<form name="titleForm" id="titleForm" th:action="@{/admin/manage/baby/calenderModelTitle}" method="POST" class="form-horizontal" role="form">
	                	
					<!-- 달력모델선정 -->
					<section id="basic-horizontal-layouts">
						<div class="row" >
							<div class="col-12">
								<div class="card">								
									<div class="card-body ">
										<!-- Form -->
	                                    <form action="javascript:;" class="mt-2" onsubmit>										
										
										<div class="row mt-1">
                                            <div class="col-md-1">기준 아기모델 </div>
											<div class="col-md-2 col-3">
											<select name="tRownum" id="tRownum" class="form-select form-select" aria-label=".form-select-sm example">
											  <option value="" selected>기준 아기모델 선택 </option>
											  <option th:each = "baby: ${modelList}"  th:value="${baby.rownum}" th:text="${baby.cName}"></option>												  
											</select>
											
											<select name="tBabyname" id="tBabyname" class="form-select form-select" aria-label=".form-select-sm example" style="display:none">
											  <option value="" selected>기준 아기모델 선택2</option>
											  <option th:each = "baby: ${modelList}"  th:value="${baby.cName}" th:text="${baby.cName}"></option>												  
											</select>
											
											<script>
											const tRownumSelect = document.getElementById('tRownum');
											const cNameSelect = document.getElementById('tBabyname');

											</script>
											
											</div>
										</div>											
										<div class="row mt-1">
											<div class="col-md-1">년/월 선택</div>								
											<div class="col-md-2 col-3">
												<select name="tYear" id="tYear" class="form-select form-select" aria-label=".form-select-sm example">
												  <option value="" selected>년도</option>
												  <option value="2020">2020</option>
												  <option value="2021">2021</option>
												  <option value="2022">2022</option>
												  <option value="2023">2023</option>
												  <option value="2024">2024</option>
												  <option value="2025">2025</option>
												</select>
											</div>
											<div class="col-md-2 col-3">
												<select name="tMonth1" id="tMonth1" class="form-select form-select" aria-label=".form-select-sm example">
											      <option value="" selected >월</option>
												  <option value="1">1</option>
												  <option value="2">2</option>
												  <option value="3">3</option>
												  <option value="4">4</option>
												  <option value="5">5</option>
												  <option value="6">6</option>
												  <option value="7">7</option>
												  <option value="8">8</option>
												  <option value="9">9</option>
												  <option value="10">10</option>
												  <option value="11">11</option>
												  <option value="12">12</option>
												</select>
											</div>
											<div class="col-md-3 col-3">
												<select name="tMonth2" id="tMonth2" class="form-select form-select" aria-label=".form-select-sm example">
											      <option value="" selected >월2 (2달치 등록시에만 선택)</option>
												  <option value="1">1</option>
												  <option value="2">2</option>
												  <option value="3">3</option>
												  <option value="4">4</option>
												  <option value="5">5</option>
												  <option value="6">6</option>
												  <option value="7">7</option>
												  <option value="8">8</option>
												  <option value="9">9</option>
												  <option value="10">10</option>
												  <option value="11">11</option>
												  <option value="12">12</option>
												</select>
											</div>											                                            
											<div class="col-md-3 col-3">
												<select name="tMonth3" id="tMonth3" class="form-select form-select" aria-label=".form-select-sm example">
											      <option value="" selected >월3 (3달치 등록시에만 선택)</option>
												  <option value="1">1</option>
												  <option value="2">2</option>
												  <option value="3">3</option>
												  <option value="4">4</option>
												  <option value="5">5</option>
												  <option value="6">6</option>
												  <option value="7">7</option>
												  <option value="8">8</option>
												  <option value="9">9</option>
												  <option value="10">10</option>
												  <option value="11">11</option>
												  <option value="12">12</option>
												</select>
											</div>											                                            
											
										</div>
	                                    <!--/ Form -->	                                    
	                                </form> 
									</div>
									
									<div class="card center">
										<div class="card-body mb-2">
											<div class="row">
												 <div class="col-sm-12">
													<button type="button" onclick="btnSave();" class="btn btn-primary me-1">등록</button>
													<button type="reset" class="btn btn-outline-secondary">취소</button>
												</div>
											</div>
										</div>
									</div>
									
                          			<div class="card-body">					  
										<button class="btn btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTitle" aria-expanded="false" aria-controls="collapseExample">
										  	타이틀 조회
										</button>											
										<div class="collapse" id="collapseTitle">
											<div class="card card-body">
											  	<ul class="list-group col-md-4" th:each="title : ${titleList}" th:id="${title.tIdx}">
											        <li class="list-group-item" >
											          <strong><span th:text="|년도:  ${title.tYear}년|">년도</span></strong>&nbsp;
											          <strong><span th:text="|월:   ${title.tMonth1}월|">월1</span></strong>&nbsp;
											          <strong><span th:if="${title.tMonth2} != ''" th:text="|${title.tMonth2}월|">월2</span></strong>&nbsp;
											          <strong><span th:text="|기준 아기모델: ${title.tBabyname}|">기준아기모델</span></strong>&nbsp;
											          <button type="button" th:id="${title.tIdx}" onclick="btnDel(this.id)" class="btn btn-danger btn-sm float-end delete-btn">삭제</button>
											        </li>										        
										    	</ul>
											</div>
										</div>
									</div>
							</div>  
							</div>
								
								
						</div>
	                </section>
					<!-- //달력모델선정 -->
				</form>
            </div>
            

			<script>
			
			</script>
      
        </div>
    </div>
    <!-- END: Content-->

    <div class="sidenav-overlay"></div>
    <div class="drag-target"></div>
    
    </th:block>
    

</html>